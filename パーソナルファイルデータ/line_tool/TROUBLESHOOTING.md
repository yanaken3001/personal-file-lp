# トラブルシューティングガイド

## 確認済み項目 ✅

以下の項目は正常に動作することを確認しました:

1. **サーバーの起動**: ✅ 正常
   - `http://127.0.0.1:5000` でアクセス可能
   - ステータスコード: 200
   - HTMLが正しく返される

2. **バックエンドAPI**: ✅ 正常
   - `/api/generate-message` エンドポイント: 正常動作
   - `/api/personality-types` エンドポイント: 正常動作
   - メッセージ生成ロジック: 正常動作
   - ReadinessScore計算: 正常動作

3. **データファイル**: ✅ 正常
   - `personality_data.json`: 正常に読み込み
   - `spec_data.json`: 正常に読み込み
   - `message_templates.json`: 正常に読み込み

4. **フロントエンドコード**: ✅ 問題なし
   - HTML構造: 問題なし
   - JavaScript: 問題なし
   - CSS: 問題なし

---

## よくある問題と解決方法

### 1. ブラウザでページが表示されない

**症状**: ブラウザで `http://localhost:5000` にアクセスしても何も表示されない

**解決方法**:

```bash
# サーバーが起動しているか確認
# PowerShellで以下を実行
Get-Process python | Where-Object {$_.CommandLine -like "*app.py*"}

# サーバーを再起動
# Ctrl+C でサーバーを停止してから
python app.py
```

### 2. 「生成」ボタンを押してもエラーが出る

**症状**: フォームに入力して「LINE返信案を生成」ボタンを押すとエラーが表示される

**解決方法**:

1. ブラウザの開発者ツールを開く(F12キー)
2. Consoleタブでエラーメッセージを確認
3. Networkタブで `/api/generate-message` のリクエストを確認

**よくあるエラー**:

- `CORS error`: サーバーを再起動してください
- `500 Internal Server Error`: サーバーのターミナルでエラーログを確認

### 3. 結果が表示されない

**症状**: ボタンを押しても結果エリアが表示されない

**解決方法**:

1. 必須フィールド(氏名、性格類型、行動類型)が入力されているか確認
2. ブラウザのコンソールでJavaScriptエラーがないか確認
3. ページをリロード(Ctrl+R)して再試行

### 4. CSSが適用されていない

**症状**: ページのデザインが崩れている

**解決方法**:

```bash
# staticフォルダの確認
dir static

# style.cssが存在するか確認
# 存在しない場合は再度ファイルを作成
```

---

## 動作確認手順

### 手順1: サーバーの起動確認

```bash
cd line_tool
python check_server.py
```

期待される出力:

```
✅ サーバーは正常に動作しています
✅ HTMLが正しく返されています
```

### 手順2: APIの動作確認

```bash
python test_api.py
```

期待される出力:

```
🎉 すべてのテストが成功しました!
```

### 手順3: ブラウザでアクセス

1. ブラウザで `http://localhost:5000` を開く
2. フォームが表示されることを確認
3. サンプルデータを入力:
   - 氏名: 山田
   - 性格類型: AI - ディリジェンサー(努力家)
   - 行動類型: 平和型
4. 「✨ LINE返信案を生成」ボタンをクリック
5. 結果が表示されることを確認

---

## デバッグ方法

### サーバーログの確認

サーバーを起動しているターミナルで、リクエストのログを確認してください:

```
127.0.0.1 - - [日時] "GET / HTTP/1.1" 200 -
127.0.0.1 - - [日時] "POST /api/generate-message HTTP/1.1" 200 -
```

### ブラウザの開発者ツール

1. F12キーを押して開発者ツールを開く
2. **Console**タブ: JavaScriptエラーを確認
3. **Network**タブ: APIリクエストの状態を確認
4. **Elements**タブ: HTML構造を確認

---

## それでも解決しない場合

以下の情報を提供してください:

1. **エラーメッセージ**: ブラウザのコンソールに表示されるエラー
2. **サーバーログ**: ターミナルに表示されるエラー
3. **症状の詳細**:
   - どの操作で問題が発生するか
   - 期待する動作と実際の動作の違い
4. **環境情報**:
   - Pythonバージョン: `python --version`
   - ブラウザ: Chrome/Edge/Firefoxなど

---

## 緊急対応: サーバーの再起動

```bash
# 1. サーバーを停止(Ctrl+C)

# 2. 依存関係を再インストール
pip install -r requirements.txt

# 3. サーバーを再起動
python app.py

# 4. ブラウザでアクセス
# http://localhost:5000
```
